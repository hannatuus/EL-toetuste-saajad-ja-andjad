{
    "collab_server" : "",
    "contents" : "names(toetus)<-tolower(names(toetus))\n#Vaiketahtedeks\ntoetus$projekti_toetus<-as.numeric(toetus$projekti_toetus)\n#Factor <- numeric\n\nsumma_antud<-toetus%>%\n  group_by(toetuse_andja)%>%\n  summarise(summa_antud = sum(projekti_toetus, na.rm=TRUE))\n\nsumma_saadud<-toetus%>%\n  group_by(toetuse_saaja_registri_kood)%>%\n  summarise(summa_saadud = sum(projekti_toetus, na.rm=TRUE))\n\nsumma_antud<-summa_antud[order(summa_antud$summa_antud, decreasing=TRUE),]\nsumma_saadud<-summa_saadud[order(summa_saadud$summa_saadud, decreasing=TRUE),]\n#Jarjestab saadud summad kahanevalt\n\nsumma_antud_long<- melt(summa_antud, id.vars=c(\"toetuse_andja\"))\nsumma_saadud_long<- melt(summa_saadud, id.vars=c(\"toetuse_saaja_registri_kood\"))\n#Convertib data formaadi laiast pikaks\n\nsumma_antud_long<- summa_antud_long[order(summa_antud_long$value, decreasing=T),]\nsumma_saadud_long<- summa_saadud_long[order(summa_saadud_long$value, decreasing=T),]\n#Jarjestab summad kahanevalt\n\nsumma_antud_long$value_miljonites<- summa_antud_long$value/1000000\n# Kogusumma iga toetuseandja kohta miljonites\nsumma_saadud_long$value_tuhandetes<-summa_saadud_long$value / 10000\n# Kogusumma iga toetusesaaja kohta tuhandetess\n\nkumme_suurimat_toetuse_saajat <- summa_saadud_long[1:10,]\n#Valib 10 suurimat toetusesaajat\n\nggplot(data=summa_antud_long,aes(x= reorder(toetuse_andja, -value), y=value/1000000))+ \n  geom_bar(stat=\"identity\")+ xlab(\"Toetuse andja\")+ ylab(\"Toetuste kogusumma (miljonites)\")+\n  ggtitle(\"Kogusumma iga toetuseandja kohta\")+  \n  theme(axis.text.x=element_text(angle=90), complete=FALSE)\n#Barplot \"Kogusumma iga toetuseandja kohta\", pooratud axis text x-teljel\n\nggplot(data=kumme_suurimat_toetuse_saajat, aes(x= reorder (toetuse_saaja_registri_kood,-value/1000), y=value/10000)) + \n  geom_bar(stat=\"identity\")+ xlab(\"Toetuse saaja registrikood\") +\n  ylab(\"Toetuste kogusumma (tuhandetes)\") + ggtitle(\"KÃ¼mme suurimat toetusesaajat\")+\n  theme(axis.text.x=element_text(angle=90), complete=FALSE)\n#Barplot 10 suurima toetusesaaja kogusmma kohta, pooratud axis x-teljel",
    "created" : 1467029024636.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1776613212",
    "id" : "F7644F4A",
    "lastKnownWriteTime" : 1467110997,
    "last_content_update" : 1467110997441,
    "path" : "~/Riigiteenused/EL-toetuste-saajad-ja-andjad/toetuse_saajad_ja_andjad.R",
    "project_path" : "toetuse_saajad_ja_andjad.R",
    "properties" : {
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}